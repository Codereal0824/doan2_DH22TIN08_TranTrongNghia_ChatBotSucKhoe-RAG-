<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chatbot T∆∞ V·∫•n S·ª©c Kh·ªèe</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <svg class="logo-icon" viewBox="0 0 24 24" fill="none">
            <path
              d="M12 2L2 7L12 12L22 7L12 2Z"
              fill="currentColor"
              opacity="0.3"
            />
            <path
              d="M2 17L12 22L22 17"
              stroke="currentColor"
              stroke-width="2"
            />
            <path
              d="M2 12L12 17L22 12"
              stroke="currentColor"
              stroke-width="2"
            />
          </svg>
          <h1>Chatbot S·ª©c Kh·ªèe</h1>
        </div>
        <div class="header-actions">
          <span
            style="
              color: var(--text-secondary);
              margin-right: 12px;
              font-size: 14px;
            "
          >
            üë§ {{ username }} {% if role == 'ADMIN' %}<span
              style="color: #667eea; font-weight: 500"
              >(Admin)</span
            >{% endif %}
          </span>
          <button class="icon-btn" id="clearBtn" title="X√≥a l·ªãch s·ª≠">
            <svg viewBox="0 0 24 24" fill="none">
              <path
                d="M3 6h18M8 6V4h8v2M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6h14z"
                stroke="currentColor"
                stroke-width="2"
              />
            </svg>
          </button>
          <button
            class="icon-btn"
            id="logoutBtn"
            title="ƒêƒÉng xu·∫•t"
            onclick="window.location.href='{{ url_for('logout') }}'"
          >
            <svg viewBox="0 0 24 24" fill="none">
              <path
                d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"
                stroke="currentColor"
                stroke-width="2"
              />
            </svg>
          </button>
        </div>
      </div>
    </header>

    <!-- Main Container -->
    <div class="container">
      <!-- Welcome Screen (shown when no messages) -->
      <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-content">
          <div class="welcome-icon">
            <svg viewBox="0 0 24 24" fill="none">
              <path
                d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
                fill="url(#gradient)"
                opacity="0.2"
              />
              <path
                d="M8 14C8 14 9.5 16 12 16C14.5 16 16 14 16 14M9 9H9.01M15 9H15.01"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
              <defs>
                <linearGradient id="gradient" x1="2" y1="2" x2="22" y2="22">
                  <stop offset="0%" stop-color="#4285f4" />
                  <stop offset="100%" stop-color="#34a853" />
                </linearGradient>
              </defs>
            </svg>
          </div>
          <h2>Xin ch√†o! T√¥i l√† tr·ª£ l√Ω t∆∞ v·∫•n s·ª©c kh·ªèe</h2>
          <p>
            H√£y ƒë·∫∑t c√¢u h·ªèi v·ªÅ s·ª©c kh·ªèe, dinh d∆∞·ª°ng, ho·∫∑c l·ªëi s·ªëng l√†nh m·∫°nh
          </p>

          <div class="example-questions">
            <h3>C√¢u h·ªèi g·ª£i √Ω:</h3>
            <div class="examples-grid">
              <button
                class="example-btn"
                data-question="Tri·ªáu ch·ª©ng c·∫£m l·∫°nh l√† g√¨?"
              >
                <span class="example-icon">ü§ß</span>
                <span>Tri·ªáu ch·ª©ng c·∫£m l·∫°nh l√† g√¨?</span>
              </button>
              <button
                class="example-btn"
                data-question="C√°ch ph√≤ng ng·ª´a b·ªánh theo m√πa?"
              >
                <span class="example-icon">üõ°Ô∏è</span>
                <span>C√°ch ph√≤ng ng·ª´a b·ªánh theo m√πa?</span>
              </button>
              <button
                class="example-btn"
                data-question="Ch·∫ø ƒë·ªô ƒÉn l√†nh m·∫°nh l√† g√¨?"
              >
                <span class="example-icon">ü•ó</span>
                <span>Ch·∫ø ƒë·ªô ƒÉn l√†nh m·∫°nh l√† g√¨?</span>
              </button>
              <button
                class="example-btn"
                data-question="T·∫≠p th·ªÉ d·ª•c h√†ng ng√†y nh∆∞ th·∫ø n√†o?"
              >
                <span class="example-icon">üèÉ</span>
                <span>T·∫≠p th·ªÉ d·ª•c h√†ng ng√†y nh∆∞ th·∫ø n√†o?</span>
              </button>
            </div>
          </div>

          <div class="disclaimer">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"
              />
            </svg>
            <p>
              <strong>L∆∞u √Ω:</strong> Th√¥ng tin ch·ªâ mang t√≠nh tham kh·∫£o. Kh√¥ng
              thay th·∫ø cho t∆∞ v·∫•n y t·∫ø chuy√™n nghi·ªáp.
            </p>
          </div>
        </div>
      </div>

      <!-- Chat Messages -->
      <div class="chat-container" id="chatContainer">
        <div class="messages" id="messages"></div>
      </div>

      <!-- Input Area -->
      <div class="input-area">
        <div class="input-container">
          <textarea
            id="messageInput"
            placeholder="H·ªèi v·ªÅ s·ª©c kh·ªèe, dinh d∆∞·ª°ng, l·ªëi s·ªëng..."
            rows="1"
            maxlength="2000"
          ></textarea>
          <button class="send-btn" id="sendBtn" disabled>
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" />
            </svg>
          </button>
        </div>
        <div class="input-footer">
          <span class="char-count" id="charCount">0 / 2000</span>
          <span class="model-info">Powered by Groq + RAG</span>
        </div>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
      <div class="loading-spinner"></div>
      <p>ƒêang kh·ªüi t·∫°o chatbot...</p>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
  </body>
</html>
